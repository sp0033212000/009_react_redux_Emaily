(this.webpackJsonpprod=this.webpackJsonpprod||[]).push([[0],{106:function(e,t,a){e.exports=a(232)},232:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getUser",(function(){return S})),a.d(n,"getSurveys",(function(){return h})),a.d(n,"postToken",(function(){return O})),a.d(n,"postSurveys",(function(){return g}));a(107);var r=a(0),l=a.n(r),c=a(44),s=a.n(c),u=a(7),i=a(6),o=a(100),m=a(22),E=a(18),d=a.n(E),f=a(26),p=a.n(f),v={LOG_OUT:"LOG_OUT",GET_USER:"FETCH_USER",GET_SURVEYS:"GET_SURVEYS",POST_TOKEN:"POST_TOKEN",POST_SURVEYS:"POST_SURVEYS"},b=a(12),y=Object(b.a)(),S=function(){return function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(p.a.get("/api/current_user"));case 2:t=a.sent,e({type:v.GET_USER,payload:t.data});case 4:case"end":return a.stop()}}))}},h=function(){return function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(p.a.get("/api/surveys"));case 2:t=a.sent,e({type:v.GET_SURVEYS,payload:t.data});case 4:case"end":return a.stop()}}))}},O=function(e){return function(t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(p.a.post("/api/stripe",e));case 2:a=n.sent,t({type:v.POST_TOKEN,payload:a.data});case 4:case"end":return n.stop()}}))}},g=function(e){return function(t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(p.a.post("/api/surveys",e));case 2:a=n.sent,y.push("/surveys"),t({type:v.POST_SURVEYS,payload:a.data});case 5:case"end":return n.stop()}}))}},_=a(25),N=a(101),T=a.n(N),w=Object(u.b)(null,n)((function(e){return l.a.createElement(T.a,{name:"Emaily",description:"$5 for 5 Emails credits",amount:500,token:function(t){return e.postToken(t)},stripeKey:"pk_test_vhbBoVvAB7IXPGmqZiz0Eska008BCTnaEX"},l.a.createElement("button",{className:"btn"},"Add Credits"))})),x=Object(u.b)((function(e){return{auth:e.auth}}),null)((function(e){return l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement(_.a,{style:{margin:"0 10px"},to:e.auth?"/surveys":"/",className:"left brand-logo"},"Emaily"),l.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},function(){switch(e.auth){case null:return null;case!1:return l.a.createElement("li",null,l.a.createElement("a",{href:"/auth/google"},"Login With Google"));default:return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(w,null)),l.a.createElement("li",{style:{margin:"0 10px"}},"Credits: ",e.auth.credits),l.a.createElement("li",null,l.a.createElement("a",{href:"/api/logout"},"Logout")))}}())))})),j=function(){return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h1",null,"Emaily!"),"Collect feedback from your users")},U=Object(u.b)((function(e){return{surveys:e.surveys.list}}),n)((function(e){var t=e.surveys,a=e.getSurveys;Object(r.useEffect)((function(){a()}),[]);return l.a.createElement("div",null,t.reverse().map((function(e){var t=e._id,a=e.title,n=e.body,r=e.dateSent,c=e.yes,s=e.no;return l.a.createElement("div",{key:t,className:"card blue-grey darken-1"},l.a.createElement("div",{className:"card-content white-text"},l.a.createElement("span",{className:"card-title"},a),l.a.createElement("p",null,n),l.a.createElement("p",{className:"right"},"Sent on: ",new Date(r).toLocaleDateString())),l.a.createElement("div",{className:"card-action"},l.a.createElement("a",null,"Yes: ",c),l.a.createElement("a",null,"No : ",s)))})))})),k=function(){return l.a.createElement("div",null,l.a.createElement(U,null),l.a.createElement("div",{className:"fixed-action-btn"},l.a.createElement(_.a,{to:"/surveys/new",className:"btn-floating btn-large red"},l.a.createElement("i",{className:"material-icons"},"add"))))},R=a(104),P=a(234),L=function(e){var t=e.input,a=e.label,n=e.meta,r=n.error,c=n.touched;return l.a.createElement("div",null,l.a.createElement("label",null,a),l.a.createElement("input",Object.assign({style:{marginBottom:"5px"}},t)),l.a.createElement("div",{className:"red-text",style:{marginBottom:"20px"}},c&&r))},C={FIELDS:[{name:"title",label:"Survey Title"},{name:"subject",label:"Subject Line"},{name:"body",label:"Email Body"},{name:"recipients",label:"Recipient List"}]},V=function(e){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:e.handleSubmit(e.onSurveySubmit)},C.FIELDS.map((function(e){var t=e.name,a=e.label;return l.a.createElement(P.a,{key:t,type:"text",name:t,label:a,component:L})})),l.a.createElement(_.a,{to:"/surveys",className:"red btn-flat white-text"},"Cancel",l.a.createElement("i",{className:"material-icons left"},"close")),l.a.createElement("button",{className:"teal btn-flat right white-text",type:"submit"},"Next",l.a.createElement("i",{className:"material-icons right"},"done"))))},G=Object(u.b)((function(e){return{formValues:e.form.surveyForm.values}}),n)((function(e){var t=e.onCancel,a=e.formValues,n=e.postSurveys;return l.a.createElement("div",null,l.a.createElement("h5",null,"Please confirm your entries"),C.FIELDS.map((function(e){var t=e.label,n=e.name;return l.a.createElement("div",{key:n},l.a.createElement("label",null,t),l.a.createElement("div",null,a[n]))})),l.a.createElement("button",{onClick:t,className:"orange darken-4 btn-flat white-text"},"Back",l.a.createElement("i",{className:"material-icons left"},"close")),l.a.createElement("button",{onClick:function(){n(a)},className:"green btn-flat right white-text",type:"submit"},"Send",l.a.createElement("i",{className:"material-icons right"},"email")))})),B=a(233),Y=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,D=function(e){var t=e.split(",").map((function(e){return e.trim()})).filter((function(e){return!1===Y.test(e)}));if(t.length)return"These emails are invalid: ".concat(t)};var I=Object(B.a)({form:"surveyForm",validate:function(e){var t={};return t.recipients=D(e.recipients||""),C.FIELDS.forEach((function(a){var n=a.name;e[n]||(t[n]="You must provide a ".concat(n,"!"))})),t}})((function(e){var t=Object(r.useState)(!1),a=Object(R.a)(t,2),n=a[0],c=a[1];return l.a.createElement("div",null,n?l.a.createElement(G,Object.assign({},e,{onCancel:function(){return c(!1)}})):l.a.createElement(V,Object.assign({},e,{onSurveySubmit:function(){return c(!0)}})))})),A=Object(u.b)(null,n)((function(e){var t=e.getUser;return Object(r.useEffect)((function(){t()}),[t]),l.a.createElement(m.b,{history:y},l.a.createElement("div",{className:"container"},l.a.createElement(x,null),l.a.createElement(m.c,null,l.a.createElement(m.a,{exact:!0,path:"/",component:j}),l.a.createElement(m.a,{exact:!0,path:"/surveys",component:k}),l.a.createElement(m.a,{path:"/surveys/new",component:I}))))})),F=a(235),K=a(105),X={list:[]},z=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v.GET_USER:case v.POST_SURVEYS:case v.POST_TOKEN:return n||!1;default:return e}},form:F.a,surveys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v.GET_SURVEYS:return Object(K.a)({},e,{list:n});default:return e}}}),J=function(e,t){return t.type===v.LOG_OUT&&(e=void 0),z(e,t)};window.axios=p.a;var Z=JSON.parse(JSON.stringify(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_STRIPE_KEY:"pk_test_vhbBoVvAB7IXPGmqZiz0Eska008BCTnaEX"})));console.log(Z);var q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,$=Object(i.e)(J,q(Object(i.a)(o.a)));s.a.render(l.a.createElement(u.a,{store:$},l.a.createElement(A,null)),document.querySelector("#root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.5b3cb6d9.chunk.js.map